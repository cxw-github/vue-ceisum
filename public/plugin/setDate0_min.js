(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{186:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(a(87)),r=n(a(1)),s=n(a(2)),l=n(a(3));function n(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(t){(0,r.default)(this,e),this.gis=t,this.start=null,this.stop=null,this.current=null,this.multiplier=null,this.dom=null}return(0,s.default)(e,[{key:"init",value:function(){var e=this.gis.config.plugin.type,t=this.gis.pluginManage,a=l.default.createList({id:"Date",title:"场景时间设置",className:"gis-nav-bar clearFix",listClassName:"gis-time",remark:"interval",parent:t.toolBar}),i=t.addPlugin({id:"DateTime",title:"场景时间设置",className:"gis-timeCtrl",type:"timeCtrl",proto:this,parent:a});this.dom=i.dom,this.loadTimeSetView(i.dom);var r=void 0,s=void 0,n=void 0;window.addEventListener("click",function(a){var l=(a=window.event||a).target;if("interval"===l.getAttribute("remark")||"interval"===(l.parentNode&&l.parentNode.getAttribute("remark")))i.dom.classList.add("active"),r=r||e.drawModule&&t.getPlugin("DrawTool"),s=s||e.measureModule&&t.getPlugin("MeasureTool"),n=n||e.dragModule&&t.getPlugin("DragTool"),r&&r.proto.close(),s&&s.proto.close(),n&&n.proto.close();else{i.dom.classList.remove("active");var u=window.top.document.querySelector("#_my97DP");u&&(u.style.display="none")}})}},{key:"loadTimeSetView",value:function(e){var t=l.default.createList({className:"clearFix gis-interval",remark:"interval",parent:e});l.default.createTextNode({text:"开始时间：",parent:t}),this.start=l.default.createInput({className:"gis-time-input gis-start",onfocus:WdatePicker,parent:t});var a=l.default.createList({className:"clearFix",remark:"interval",parent:e});l.default.createTextNode({text:"结束时间：",parent:a}),this.stop=l.default.createInput({className:"gis-time-input gis-stop",onfocus:WdatePicker,parent:a});var i=l.default.createList({className:"clearFix",remark:"interval",parent:e});l.default.createTextNode({text:"当前时刻：",parent:i}),this.current=l.default.createInput({className:"gis-time-input gis-current",onfocus:WdatePicker,parent:i});var r=l.default.createList({className:"clearFix",remark:"interval",parent:e});l.default.createTextNode({text:"时间速率：",parent:r}),this.multiplier=l.default.createInput({className:"gis-time-input gis-multiplier",type:"type",text:"G",parent:r});var s=l.default.createList({className:"clearFix",remark:"interval",parent:e});l.default.createButton({className:"gis-time-input gis-ensure",text:"GO",parent:s,onclick:this.setClock.bind(this)})}},{key:"setClock",value:function(){var e=this.start.value&&Cesium.JulianDate.fromDate(l.default.getDateForStringDate(this.start.value))||this.gis.clock.startTime,t=this.stop.value&&Cesium.JulianDate.fromDate(l.default.getDateForStringDate(this.stop.value))||this.gis.clock.stopTime;if(Cesium.JulianDate.greaterThanOrEquals(e,t))l.default.messageTips({text:"开始时间必须小于结束时间"});else{var a=this.current.value&&Cesium.JulianDate.fromDate(l.default.getDateForStringDate(this.current.value))||this.gis.clock.currentTime,r=(0,i.default)("G"===this.multiplier.value.toLocaleUpperCase()&&this.gis.clock.multiplier||this.multiplier.value);(Cesium.JulianDate.greaterThan(a,t)||Cesium.JulianDate.lessThan(a,e))&&(a=e,this.current.value=this.start.value),this.gis.initClock({startTime:e,stopTime:t,currentTime:a,multiplier:r}),this.gis.clock.runAnimations=!0}}},{key:"close",value:function(){this.dom.classList.remove("active")}},{key:"enable",value:function(e){e=Boolean(e),this.dom.parentNode.style.display=e?"block":"none"}}]),e}();t.default=u}}]);