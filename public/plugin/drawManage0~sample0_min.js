(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{128:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=d(i(129)),a=d(i(17)),l=d(i(1)),s=d(i(2)),r=d(i(18)),o=d(i(19)),c=d(i(3)),h=d(i(85)),u=d(i(68));function d(e){return e&&e.__esModule?e:{default:e}}var p=window.Cesium,g={gis:null,pointHandle:null,lineHandle:null,rectangleHandler:null,polygonHandler:null,moveHandler:null,selectRectHandler:null,selectAreaHandler:null,instantHandler:null,reset:function(){this.pointHandle=this.pointHandle&&this.pointHandle.destroy(),this.lineHandle=this.lineHandle&&this.lineHandle.destroy(),this.rectangleHandler=this.rectangleHandler&&this.rectangleHandler.destroy(),this.polygonSampleHandler=this.polygonSampleHandler&&this.polygonSampleHandler.destroy(),this.polygonHandler=this.polygonHandler&&this.polygonHandler.destroy(),this.moveHandler=this.moveHandler&&this.moveHandler.destroy(),this.selectRectHandler=this.selectRectHandler&&this.selectRectHandler.destroy(),this.selectAreaHandler=this.selectAreaHandler&&this.selectAreaHandler.destroy(),this.instantHandler=this.instantHandler&&this.instantHandler.destroy()},destroy:function(e,t,i,n,a,l,s,r,o){var c=new p.ScreenSpaceEventHandler(this.gis.scene.canvas);this.pointHandle=e&&this.pointHandle&&this.pointHandle.destroy()||c,this.lineHandle=t&&this.lineHandle&&this.lineHandle.destroy()||c,this.rectangleHandler=i&&this.rectangleHandler&&this.rectangleHandler.destroy()||c,this.polygonHandler=n&&this.polygonHandler&&this.polygonHandler.destroy()||c,this.polygonSampleHandler=a&&this.polygonSampleHandler&&this.polygonSampleHandler.destroy()||c,this.moveHandler=l&&this.moveHandler&&this.moveHandler.destroy()||c,this.selectRectHandler=s&&this.selectRectHandler&&this.selectRectHandler.destroy()||c,this.selectAreaHandler=r&&this.selectAreaHandler&&this.selectAreaHandler.destroy()||c,this.instantHandler=o&&this.instantHandler&&this.instantHandler.destroy()||c}},v=function(e){function t(e){(0,l.default)(this,t);var i=(0,r.default)(this,(t.__proto__||(0,a.default)(t)).call(this));return i.gis=e,g.gis=e,i.graphics=i.gis.graphics,i.viewer=null,i.scene=null,i.camera=null,i.clock=null,i.multi_point=[],i.multi_cartesian=[],i.instant={line:null,rectangle:null,polygon:null,move:null},i.colletion=new p.EntityCollection,i}return(0,o.default)(t,e),(0,s.default)(t,[{key:"initial",value:function(){this.viewer=this.gis.viewer,this.scene=this.gis.scene,this.camera=this.gis.camera,this.clock=this.gis.clock}},{key:"getName",value:function(e){var t=1;return this.colletion.values.forEach(function(i){return-1!==i.name.indexOf(e)&&t++}),e+"_"+t}},{key:"stopPropagation",value:function(e){this.completeStatus(),(e=window.event||e)&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)}},{key:"completeStatus",value:function(){var e=this;this.gis.isToolWight=!0,(0,n.default)(this.instant).forEach(function(t){return e.viewer.entities.remove(t)}),this.multi_point=[],this.multi_cartesian=[]}},{key:"drawPoint",value:function(e){this.stopPropagation(e),g.destroy(!1,!0,!0,!0,!0,!0,!0,!0,!0,!0),g.pointHandle.setInputAction(function(e){var t=this.camera.pickEllipsoid(e.position,this.scene.globe.ellipsoid);if(t){var i=c.default.convertToDegrees(p.Cartographic.fromCartesian(t)),n=this.gis.addPoint(p.createGuid(),t,this.getName("点目标"),{"坐标信息":i},"#15FF5B",1,"",!0,2);this.colletion.add(n),this.gis.event.fireEvent("onDraw",new u.default(n))}}.bind(this),p.ScreenSpaceEventType.LEFT_CLICK)}},{key:"drawLine",value:function(e){this.stopPropagation(e);var t=!1,i=0,n=!0;g.destroy(!0,!1,!0,!0,!0,!0,!0,!0,!0,!0),g.lineHandle.setInputAction(function(e){var a=this,l=this.camera.pickEllipsoid(e.position,this.scene.globe.ellipsoid);l&&(t=!0,i++,this.multi_cartesian.push(l),n&&(this.instant.line=this.addLineCallback(function(){return c.default.getCenterCartesian(a.multi_cartesian)},function(){return a.multi_cartesian},this.getName("线目标"),null,"#7FFFD4",!0,!1),this.viewer.entities.add(this.instant.line),n=!1))}.bind(this),p.ScreenSpaceEventType.LEFT_CLICK),g.lineHandle.setInputAction(function(e){if(t){var n=this.camera.pickEllipsoid(e.endPosition,this.scene.globe.ellipsoid);if(n){var a=this.multi_cartesian.length;a>i&&this.multi_cartesian.splice(i,a),this.multi_cartesian.push(n)}}}.bind(this),p.ScreenSpaceEventType.MOUSE_MOVE),g.lineHandle.setInputAction(function(){var e=this.multi_cartesian.length;if(e>i&&this.multi_cartesian.splice(i,e),this.multi_cartesian.length>1){var a="";this.multi_cartesian.forEach(function(e){return a+=c.default.convertToDegrees(p.Cartographic.fromCartesian(e))+"</br>"});var l=this.gis.addLine(p.createGuid(),this.multi_cartesian,this.getName("线目标"),{"坐标信息":a},"#7FFFD4",.6,"",!0,2);this.colletion.add(l),this.gis.event.fireEvent("onDraw",new u.default(l))}this.instant.line&&this.viewer.entities.remove(this.instant.line),t=!1,n=!0,i=0,delete this.instant.line,this.multi_cartesian=[]}.bind(this),p.ScreenSpaceEventType.RIGHT_CLICK)}},{key:"drawRectangle",value:function(e){this.stopPropagation(e);var t=!1,i=0,n=!0;g.destroy(!0,!0,!1,!0,!0,!0,!0,!0,!0),g.rectangleHandler.setInputAction(function(e){var a=this,l=this.camera.pickEllipsoid(e.position,this.scene.globe.ellipsoid);if(l&&(t=!0,i++,this.multi_cartesian.push(l),n&&(this.instant.rectangle=this.addRectangleCallback(function(){return c.default.getCenterCartesian(a.multi_cartesian)},function(){return p.Rectangle.fromCartesianArray(a.multi_cartesian,p.Ellipsoid.WGS84)},this.getName("矩形区域目标"),null,"#7FFFD4",.3,!0),this.viewer.entities.add(this.instant.rectangle),n=!1),2===i)){this.instant.rectangle&&this.viewer.entities.remove(this.instant.rectangle);var s="",r=this.gis.addRectangle(p.createGuid(),this.multi_cartesian,this.getName("矩形区域目标"),s.toString(),!0,"#7FFFD4",.3,"",!0,2);c.default.getRect4PeakCartographicByRectangle(r).forEach(function(e){e.longitude=p.Math.toRadians(e.longitude),e.latitude=p.Math.toRadians(e.latitude),s+=c.default.convertToDegrees(e)+"</br>"}),r.description={"坐标信息":s},this.colletion.add(r),this.gis.event.fireEvent("onDraw",new u.default(r)),t=!1,n=!0,i=0,delete this.instant.rectangle,this.multi_cartesian=[]}}.bind(this),p.ScreenSpaceEventType.LEFT_CLICK),g.rectangleHandler.setInputAction(function(e){if(t){var n=this.viewer.camera.pickEllipsoid(e.endPosition,this.scene.globe.ellipsoid);if(n){var a=this.multi_cartesian.length;a>i&&this.multi_cartesian.splice(i,a),this.multi_cartesian.push(n)}}}.bind(this),p.ScreenSpaceEventType.MOUSE_MOVE)}},{key:"drawPolygon",value:function(e){this.stopPropagation(e);var t=!1,i=0,n=!0;g.destroy(!0,!0,!0,!1,!0,!0,!0,!0,!0),g.polygonHandler.setInputAction(function(e){var a=this,l=this.viewer.camera.pickEllipsoid(e.position,this.scene.globe.ellipsoid);l&&(t=!0,1===++i?(this.instant.line=this.addLineCallback(function(){return c.default.getCenterCartesian(a.multi_cartesian)},function(){return a.multi_cartesian},this.getName("多边形区域目标"),null,"#7FFFD4",!0,null),this.viewer.entities.add(this.instant.line)):n&&(this.instant.polygon=this.addAreaCallback(function(){return c.default.getCenterCartesian(a.multi_cartesian)},function(){return a.multi_cartesian},this.getName("多边形区域目标"),null,"#7FFFD4",.3,!0,null),this.viewer.entities.add(this.instant.polygon),n=!1),this.multi_cartesian.push(l))}.bind(this),p.ScreenSpaceEventType.LEFT_CLICK),g.polygonHandler.setInputAction(function(e){if(t){var n=this.viewer.camera.pickEllipsoid(e.endPosition,this.scene.globe.ellipsoid);if(n){var a=this.multi_cartesian.length;a>i&&this.multi_cartesian.splice(i,a),this.multi_cartesian.push(n),2===i&&this.instant.line&&this.viewer.entities.remove(this.instant.line)}}}.bind(this),p.ScreenSpaceEventType.MOUSE_MOVE),g.polygonHandler.setInputAction(function(e){var a=this.multi_cartesian.length;if(a>i&&this.multi_cartesian.splice(i,a),this.multi_cartesian.length>2){var l="";this.multi_cartesian.forEach(function(e){return l+=c.default.convertToDegrees(p.Cartographic.fromCartesian(e))+"</br>"});var s=this.gis.addPolygon(p.createGuid(),this.multi_cartesian,this.getName("多边形区域目标"),{"坐标信息":l},!0,"#7FFFD4",.3,"",!0,2);this.colletion.add(s),this.gis.event.fireEvent("onDraw",new u.default(s))}this.instant.line&&this.viewer.entities.remove(this.instant.line),this.instant.polygon&&this.viewer.entities.remove(this.instant.polygon),t=!1,i=0,n=!0,delete this.instant.line,delete this.instant.polygon,this.multi_cartesian=[]}.bind(this),p.ScreenSpaceEventType.RIGHT_CLICK)}},{key:"drawMoveTarget",value:function(e){this.stopPropagation(e);var t=!1,i=0,n=!0;g.destroy(!0,!0,!0,!0,!0,!1,!0,!0,!0),g.moveHandler.setInputAction(function(e){var a=this,l=this.viewer.camera.pickEllipsoid(e.position,this.scene.globe.ellipsoid);l&&(t=!0,i++,this.multi_cartesian.push(l),n&&(this.instant.move=this.addMoveTargetPathCallback(function(){return c.default.getCenterCartesian(a.multi_cartesian)},function(){return a.multi_cartesian},this.getName("移动目标"),null,!0),this.viewer.entities.add(this.instant.move),n=!1))}.bind(this),p.ScreenSpaceEventType.LEFT_CLICK),g.moveHandler.setInputAction(function(e){if(t){var n=this.viewer.camera.pickEllipsoid(e.endPosition,this.scene.globe.ellipsoid);if(n){var a=this.multi_cartesian.length;a>i&&this.multi_cartesian.splice(i,a),this.multi_cartesian.push(n)}}}.bind(this),p.ScreenSpaceEventType.MOUSE_MOVE),g.moveHandler.setInputAction(function(e){var a=this.multi_cartesian.length;if(a>i&&this.multi_cartesian.splice(i,a),this.multi_cartesian.length>1){var l=[],s=this.viewer.clock.currentTime,r=p.JulianDate.toDate(s).getTime(),o="",h=void 0;this.multi_cartesian.forEach(function(e,t){var i=p.Cartographic.fromCartesian(e);if(h){var n=new p.EllipsoidGeodesic;n.setEndPoints(h,i);var a=Math.round(n.surfaceDistance);r+=3600*a/55}var s=new Date(r),u=c.default.getStringDateFromNormalDate(s);o+=u+","+c.default.convertToDegrees(i)+"</br>",l.push(p.JulianDate.fromDate(s)),r+=36e5,h=i},this);var d=this.gis.graduallyMoving.createMovingTarget(p.createGuid(),this.multi_cartesian,l,this.getName("移动目标"),{"坐标信息":o},!0);this.colletion.add(d),this.gis.event.fireEvent("onDraw",new u.default(d))}this.viewer.entities.remove(this.instant.move),t=!1,n=!0,i=0,delete this.instant.move,this.multi_cartesian=[]}.bind(this),p.ScreenSpaceEventType.RIGHT_CLICK)}},{key:"selectionArea",value:function(e){this.stopPropagation(e),g.destroy(!0,!0,!0,!0,!0,!0,!0,!1,!0);var t=!1;g.selectAreaHandler.setInputAction(function(e){t=!0,this.gis.disableDefaultEventHandlers(!1,!1,!1,!1,!1)}.bind(this),p.ScreenSpaceEventType.LEFT_DOWN),g.selectAreaHandler.setInputAction(function(e){var i=this.viewer.camera.pickEllipsoid(e.endPosition,this.scene.globe.ellipsoid);if(t&&i){p.Ellipsoid.WGS84.scaleToGeocentricSurface(i,i);var n=this.gis.addPoint(p.createGuid(),i,"选区点","这是选区点","#06b6ef",1,"",!1,2);n.type=void 0,this.multi_point.push(n),this.multi_cartesian.push(i)}}.bind(this),p.ScreenSpaceEventType.MOUSE_MOVE),g.selectAreaHandler.setInputAction(function(e){var i=this;if(t=!1,this.multi_cartesian.length>2){var n=this.gis.addPolygon(p.createGuid(),this.multi_cartesian,this.getName("多边形选区"),"这是多边形选择区域.",!1,"yellow",.8,"",!0,2);n.type="SEL_AREA",n.label.show=!1,n.billboard.show=!1,this.colletion.add(n),this.multi_point.forEach(function(e){return i.gis.removeOverlayById(e.id)},this),this.gis.event.fireEvent("onMultiSelected",this.graphics.getOverlayFromPolygon(n))}this.gis.disableDefaultEventHandlers(!0,!0,!0,!0,!0),this.multi_point=[],this.multi_cartesian=[]}.bind(this),p.ScreenSpaceEventType.LEFT_UP)}},{key:"removeAll",value:function(e){var t=this;this.stopPropagation(e),this.colletion.values.forEach(function(e){return t.gis.removeOverlayById(e.id)}),this.colletion.removeAll()}},{key:"showPosition",value:function(e){this.stopDrawing(e),this.stopPropagation(e),this.gis.showPosition=!this.gis.showPosition}},{key:"stopDrawing",value:function(e){this.stopPropagation(e),g.reset(),this.gis.isToolWight=!1}}]),t}(h.default);t.default=v},85:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(i(1)),a=l(i(2));function l(e){return e&&e.__esModule?e:{default:e}}var s=window.Cesium,r=function(){function e(){(0,n.default)(this,e),this.defaultColorValue=function(e,t){return void 0!==e?s.Color.fromCssColorString(e):s.Color.fromCssColorString(t)},this.defaultValue=function(e,t){return void 0!==e?e:t}}return(0,a.default)(e,[{key:"addPointCallback",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments[2],n=arguments[3],a=(arguments[4],arguments[5]),l=arguments[6],r=this.gis.config.site.relative;return l=l&&r+"/images/flag/"+l+".png"||null,new s.Entity({name:t,description:i||"",label:{text:t,font:"28px sans-serif",fillColor:s.Color.DARKTURQUOISE,horizontalOrigin:s.HorizontalOrigin.LEFT,scale:.6,show:this.defaultValue(a,!0),translucencyByDistance:new s.NearFarScalar(295e3,2,3e5,2),scaleByDistance:new s.NearFarScalar(3e6,1.1,525e6,.1)},billboard:{image:l,scale:.5,show:l&&!0},position:new s.CallbackProperty(e,!1),point:{pixelSize:5,color:this.defaultColorValue(n,"#F0F")}})}},{key:"addLineCallback",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments[3],a=arguments[4],l=arguments[5],r=arguments[6],o=this.gis.config.site.relative;return r=r&&o+"/images/flag/"+r+".png"||null,new s.Entity({name:i,description:n||"",label:{text:i,font:"28px sans-serif",fillColor:s.Color.DARKTURQUOISE,horizontalOrigin:s.HorizontalOrigin.LEFT,scale:.6,show:l&&!0,translucencyByDistance:new s.NearFarScalar(295e3,2,3e5,2),scaleByDistance:new s.NearFarScalar(3e6,1.1,525e6,.1)},billboard:{image:r,scale:.5,show:r&&!0},position:new s.CallbackProperty(e,!1),polyline:{positions:new s.CallbackProperty(t,!1),width:2,material:this.defaultColorValue(a,"#FFD700")}})}},{key:"addRectangleCallback",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments[3],a=arguments[4],l=arguments[5],r=arguments[6],o=arguments[7],c=arguments[8],h=this.gis.config.site.relative;return o=o&&h+"/images/flag/"+o+".png"||null,l=l||(0===l?l:.3),c=this.defaultValue(c,!0),new s.Entity({name:i,description:n||"",position:new s.CallbackProperty(e,!1),label:{text:i,font:"28px sans-serif",fillColor:s.Color.DARKTURQUOISE,horizontalOrigin:s.HorizontalOrigin.LEFT,scale:.6,show:r&&!0,translucencyByDistance:new s.NearFarScalar(295e3,2,3e5,2),scaleByDistance:new s.NearFarScalar(3e6,1.1,525e6,.1)},billboard:{image:o,scale:.5,show:o&&!0},rectangle:{coordinates:new s.CallbackProperty(t,!1),fill:c,material:this.defaultColorValue(a,"#0000FF").withAlpha(l),height:-2e4,outline:!0,outlineColor:this.defaultColorValue(a,"#0000FF").withAlpha(l)}})}},{key:"addAreaCallback",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments[3],a=arguments[4],l=arguments[5],r=arguments[6],o=arguments[7],c=this.gis.config.site.relative;return o=o&&c+"/images/flag/"+o+".png"||null,l=l||(0===l?l:.3),new s.Entity({name:i,description:n||"",label:{text:i,font:"28px sans-serif",fillColor:s.Color.DARKTURQUOISE,horizontalOrigin:s.HorizontalOrigin.LEFT,scale:.6,show:r&&!0,translucencyByDistance:new s.NearFarScalar(295e3,2,3e5,2),scaleByDistance:new s.NearFarScalar(3e6,1.1,525e6,.1)},billboard:{image:o,scale:.5,show:o&&!0},position:new s.CallbackProperty(e,!1),polygon:{hierarchy:new s.CallbackProperty(t,!1),fill:!0,material:this.defaultColorValue(a,"#0000FF").withAlpha(l),height:0,outline:!0,outlineWidth:2,outlineColor:this.defaultColorValue(a,"#0000FF").withAlpha(l)}})}},{key:"addMoveTargetPathCallback",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments[4];return new s.Entity({name:i,description:n,label:{text:i,font:"28px sans-serif",fillColor:s.Color.DARKTURQUOISE,horizontalOrigin:s.HorizontalOrigin.LEFT,scale:.6,show:a&&!0,translucencyByDistance:new s.NearFarScalar(295e3,2,3e5,2),scaleByDistance:new s.NearFarScalar(3e6,1.1,525e6,.1)},position:new s.CallbackProperty(e,!1),polyline:{positions:new s.CallbackProperty(t,!1),width:2,material:new s.PolylineOutlineMaterialProperty({color:s.Color.CHARTREUSE,outlineColor:s.Color.BROWN,outlineWidth:2,width:2})}})}}]),e}();t.default=r}}]);