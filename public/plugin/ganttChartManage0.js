(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["ganttChartManage0"],{

/***/ "./src/js/plugin/ganttChart.js":
/*!*************************************!*\
  !*** ./src/js/plugin/ganttChart.js ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _from = __webpack_require__(/*! babel-runtime/core-js/array/from */ \"./node_modules/babel-runtime/core-js/array/from.js\");\n\nvar _from2 = _interopRequireDefault(_from);\n\nvar _classCallCheck2 = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ \"./node_modules/babel-runtime/helpers/classCallCheck.js\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(/*! babel-runtime/helpers/createClass */ \"./node_modules/babel-runtime/helpers/createClass.js\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _widgetHelper = __webpack_require__(/*! ../widgetHelper */ \"./src/js/widgetHelper.js\");\n\nvar _widgetHelper2 = _interopRequireDefault(_widgetHelper);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _class = function () {\n    function _class() {\n        (0, _classCallCheck3.default)(this, _class);\n\n        this.parentDiv = null;\n        this.timePointer = null; //指针\n        this.needle = null; //cesium指针\n        this.width = null; //轴宽\n        this.timeline = null; //轴dom对象\n        this.timelineBar = null; //刻度\n        this.timeWidth = null; //单位时间长度 px/ms\n        this.viewer = null;\n        this.clock = null;\n        this.currentTime = null;\n        this.startTime = null;\n        this.stopTime = null;\n        this.multiplier = null;\n        this.positionInfo = null;\n        this.stripe = []; //条带集合\n        this.axisStartTime = null; //轴开始时间\n        this.axisStopTime = null; //轴结束时间\n        this.axisStartLeft = null; //开始时间刻度位置\n        this.axisStopLeft = null; //结束时间刻度位置\n        this.eventListener = null; //监听函数\n    }\n    //初始化\n\n\n    (0, _createClass3.default)(_class, [{\n        key: 'initial',\n        value: function initial() {\n            this.clock = this.gis.clock;\n            this.currentTime = this.currentTime || this.clock.currentTime;\n            this.multiplier = this.multiplier || this.clock.multiplier;\n            this.startTime = this.startTime || this.clock.startTime;\n            this.stopTime = this.stopTime || this.clock.stopTime;\n            this.timeline = document.querySelector('.cesium-viewer-timelineContainer');\n            this.needle = document.querySelector('.cesium-timeline-needle');\n            this.timelineBar = document.querySelector('.cesium-timeline-bar');\n            this.clockCtrl = this.gis.pluginManage.getPlugin('ClockCtrl');\n            this.positionInfo = document.querySelector('.gis-positionInfo');\n            // this.refreshPluginPosition();\n        }\n        //重新定位插件位置\n\n    }, {\n        key: 'refreshPluginPosition',\n        value: function refreshPluginPosition() {\n            var height = this.parentDiv.parentNode.offsetHeight + this.timeline.offsetHeight;\n            this.positionInfo.style.bottom = height + 10 + 'px';\n            if (this.clockCtrl) {\n                this.clockCtrl.dom.style.bottom = height + 'px';\n                this.positionInfo.style.right = this.clockCtrl.dom.offsetWidth + 30 + 'px';\n            }\n        }\n\n        //获取时间轴元素及刻度值\n\n    }, {\n        key: 'initElementAndTimelineTic',\n        value: function initElementAndTimelineTic() {\n            this.timeline.style.bottom = this.parentDiv.parentNode.offsetHeight + 'px';\n            this.refreshPluginPosition();\n            this.width = this.timelineBar.offsetWidth;\n            this.parentDiv.parentNode.style.width = this.width + 'px';\n            if (this.timePointer) this.timePointer.style.left = this.needle ? this.needle.offsetLeft + 1 + 'px' : 0;\n            var ticLabelDom = (0, _from2.default)(document.getElementsByClassName('cesium-timeline-ticLabel'));\n            var ticMainDom = (0, _from2.default)(document.getElementsByClassName('cesium-timeline-ticMain'));\n            var length = ticLabelDom.length;\n            if (length !== ticMainDom.length) return;\n            this.axisStartTime = _widgetHelper2.default.getDateForStringDate(ticLabelDom[0].innerHTML).getTime();\n            this.axisStopTime = _widgetHelper2.default.getDateForStringDate(ticLabelDom[length - 1].innerHTML).getTime();\n            this.axisStartLeft = ticMainDom[0].offsetLeft;\n            this.axisStopLeft = ticMainDom[length - 1].offsetLeft;\n        }\n        //初始化单个时间值条带\n\n    }, {\n        key: 'initTargetSampleStripe',\n        value: function initTargetSampleStripe(element) {\n            if (!(this.axisStartTime && this.axisStopTime)) return;\n            var start = new Date(parseInt(element.getAttribute('start')));\n            var stop = new Date(parseInt(element.getAttribute('stop')));\n            if (start <= this.axisStartTime && stop >= this.axisStopTime) {\n                element.style.left = 0;\n                element.style.right = 0;\n            } else {\n                this.timeWidth = (this.axisStopLeft - this.axisStartLeft) / (this.axisStopTime - this.axisStartTime);\n                var startLeft = this.axisStartLeft + this.timeWidth * (start - this.axisStartTime);\n                var stopLeft = this.axisStartLeft + this.timeWidth * (stop - this.axisStartTime);\n                if (stopLeft - startLeft < 1) stopLeft = startLeft + 1;\n                element.style.left = startLeft + 1 + 'px';\n                element.style.right = this.width - stopLeft - 1 + 'px';\n            }\n        }\n        //初始化时间值条带\n\n    }, {\n        key: 'initSampleTargetStripe',\n        value: function initSampleTargetStripe() {\n            if (!this.stripe.length) return;\n            this.stripe.forEach(this.initTargetSampleStripe, this);\n        }\n        //时钟监听\n\n    }, {\n        key: 'initEventListener',\n        value: function initEventListener() {\n            if (!this.timeline && this.eventListener) return;\n            this.clockCtrl && this.clockCtrl.addClassName('gis-offsetByGanttChart');\n            this.gis.addClockEvent(function tick() {\n                this.eventListener = tick;\n                this.initElementAndTimelineTic();\n                this.initSampleTargetStripe();\n            }, this);\n        }\n        //移除时钟监听\n\n    }, {\n        key: 'removeEventListener',\n        value: function removeEventListener() {\n            this.clockCtrl && this.clockCtrl.removeClassName('gis-offsetByGanttChart');\n            this.gis.removeClockEvent(this.eventListener, this);\n            this.eventListener = null;\n            this.positionInfo.style.right = 30 + 'px';\n            this.positionInfo.style.bottom = 40 + 'px';\n        }\n    }]);\n    return _class;\n}(); /*甘特图模块*/\n\n\nexports.default = _class;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvanMvcGx1Z2luL2dhbnR0Q2hhcnQuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2pzL3BsdWdpbi9nYW50dENoYXJ0LmpzP2QxODkiXSwic291cmNlc0NvbnRlbnQiOlsiLyrnlJjnibnlm77mqKHlnZcqL1xyXG5pbXBvcnQgd2lkZ2V0SGVscGVyIGZyb20gJy4uL3dpZGdldEhlbHBlcic7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzICB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLnBhcmVudERpdiA9IG51bGw7XHJcbiAgICAgICAgdGhpcy50aW1lUG9pbnRlciA9IG51bGw7Ly/mjIfpkohcclxuICAgICAgICB0aGlzLm5lZWRsZSA9IG51bGw7Ly9jZXNpdW3mjIfpkohcclxuICAgICAgICB0aGlzLndpZHRoID0gbnVsbDsvL+i9tOWuvVxyXG4gICAgICAgIHRoaXMudGltZWxpbmUgPSBudWxsOy8v6L20ZG9t5a+56LGhXHJcbiAgICAgICAgdGhpcy50aW1lbGluZUJhciA9IG51bGw7Ly/liLvluqZcclxuICAgICAgICB0aGlzLnRpbWVXaWR0aCA9IG51bGw7Ly/ljZXkvY3ml7bpl7Tplb/luqYgcHgvbXNcclxuICAgICAgICB0aGlzLnZpZXdlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5jbG9jayA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50VGltZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5zdGFydFRpbWUgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuc3RvcFRpbWUgPSBudWxsO1xyXG4gICAgICAgIHRoaXMubXVsdGlwbGllciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbkluZm8gPSBudWxsO1xyXG4gICAgICAgIHRoaXMuc3RyaXBlID0gW107Ly/mnaHluKbpm4blkIhcclxuICAgICAgICB0aGlzLmF4aXNTdGFydFRpbWUgPSBudWxsOy8v6L205byA5aeL5pe26Ze0XHJcbiAgICAgICAgdGhpcy5heGlzU3RvcFRpbWUgPSBudWxsOy8v6L2057uT5p2f5pe26Ze0XHJcbiAgICAgICAgdGhpcy5heGlzU3RhcnRMZWZ0ID0gbnVsbDsvL+W8gOWni+aXtumXtOWIu+W6puS9jee9rlxyXG4gICAgICAgIHRoaXMuYXhpc1N0b3BMZWZ0ID0gbnVsbDsvL+e7k+adn+aXtumXtOWIu+W6puS9jee9rlxyXG4gICAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lciA9IG51bGw7Ly/nm5HlkKzlh73mlbBcclxuICAgIH1cclxuICAgIC8v5Yid5aeL5YyWXHJcbiAgICBpbml0aWFsICgpIHtcclxuICAgICAgICB0aGlzLmNsb2NrID0gdGhpcy5naXMuY2xvY2s7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50VGltZSA9IHRoaXMuY3VycmVudFRpbWUgfHwgdGhpcy5jbG9jay5jdXJyZW50VGltZTtcclxuICAgICAgICB0aGlzLm11bHRpcGxpZXIgPSB0aGlzLm11bHRpcGxpZXIgfHwgdGhpcy5jbG9jay5tdWx0aXBsaWVyO1xyXG4gICAgICAgIHRoaXMuc3RhcnRUaW1lID0gdGhpcy5zdGFydFRpbWUgfHwgdGhpcy5jbG9jay5zdGFydFRpbWU7XHJcbiAgICAgICAgdGhpcy5zdG9wVGltZSA9IHRoaXMuc3RvcFRpbWUgfHwgdGhpcy5jbG9jay5zdG9wVGltZTtcclxuICAgICAgICB0aGlzLnRpbWVsaW5lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNlc2l1bS12aWV3ZXItdGltZWxpbmVDb250YWluZXInKTtcclxuICAgICAgICB0aGlzLm5lZWRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jZXNpdW0tdGltZWxpbmUtbmVlZGxlJyk7XHJcbiAgICAgICAgdGhpcy50aW1lbGluZUJhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jZXNpdW0tdGltZWxpbmUtYmFyJyk7XHJcbiAgICAgICAgdGhpcy5jbG9ja0N0cmwgPSB0aGlzLmdpcy5wbHVnaW5NYW5hZ2UuZ2V0UGx1Z2luKCdDbG9ja0N0cmwnKTtcclxuICAgICAgICB0aGlzLnBvc2l0aW9uSW5mbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5naXMtcG9zaXRpb25JbmZvJyk7XHJcbiAgICAgICAgLy8gdGhpcy5yZWZyZXNoUGx1Z2luUG9zaXRpb24oKTtcclxuICAgIH1cclxuICAgIC8v6YeN5paw5a6a5L2N5o+S5Lu25L2N572uXHJcbiAgICByZWZyZXNoUGx1Z2luUG9zaXRpb24gKCkge1xyXG4gICAgICAgIGNvbnN0IGhlaWdodCA9IHRoaXMucGFyZW50RGl2LnBhcmVudE5vZGUub2Zmc2V0SGVpZ2h0ICsgdGhpcy50aW1lbGluZS5vZmZzZXRIZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbkluZm8uc3R5bGUuYm90dG9tID0gaGVpZ2h0ICsgMTAgKydweCc7XHJcbiAgICAgICAgaWYodGhpcy5jbG9ja0N0cmwpIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9ja0N0cmwuZG9tLnN0eWxlLmJvdHRvbSA9IGhlaWdodCArICdweCc7XHJcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb25JbmZvLnN0eWxlLnJpZ2h0ID0gdGhpcy5jbG9ja0N0cmwuZG9tLm9mZnNldFdpZHRoICsgMzAgKydweCc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8v6I635Y+W5pe26Ze06L205YWD57Sg5Y+K5Yi75bqm5YC8XHJcbiAgICBpbml0RWxlbWVudEFuZFRpbWVsaW5lVGljICgpIHtcclxuICAgICAgICB0aGlzLnRpbWVsaW5lLnN0eWxlLmJvdHRvbSA9IHRoaXMucGFyZW50RGl2LnBhcmVudE5vZGUub2Zmc2V0SGVpZ2h0ICsgJ3B4JztcclxuICAgICAgICB0aGlzLnJlZnJlc2hQbHVnaW5Qb3NpdGlvbigpO1xyXG4gICAgICAgIHRoaXMud2lkdGggPSB0aGlzLnRpbWVsaW5lQmFyLm9mZnNldFdpZHRoO1xyXG4gICAgICAgIHRoaXMucGFyZW50RGl2LnBhcmVudE5vZGUuc3R5bGUud2lkdGggPSB0aGlzLndpZHRoICsgJ3B4JztcclxuICAgICAgICBpZih0aGlzLnRpbWVQb2ludGVyKSB0aGlzLnRpbWVQb2ludGVyLnN0eWxlLmxlZnQgPSB0aGlzLm5lZWRsZSA/ICh0aGlzLm5lZWRsZS5vZmZzZXRMZWZ0KzEgKydweCcpIDogMDtcclxuICAgICAgICBjb25zdCB0aWNMYWJlbERvbSA9IEFycmF5LmZyb20oZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnY2VzaXVtLXRpbWVsaW5lLXRpY0xhYmVsJykpO1xyXG4gICAgICAgIGNvbnN0IHRpY01haW5Eb20gPSBBcnJheS5mcm9tKGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2Nlc2l1bS10aW1lbGluZS10aWNNYWluJykpO1xyXG4gICAgICAgIGNvbnN0IGxlbmd0aCA9IHRpY0xhYmVsRG9tLmxlbmd0aDtcclxuICAgICAgICBpZiggbGVuZ3RoICE9PSB0aWNNYWluRG9tLmxlbmd0aCkgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuYXhpc1N0YXJ0VGltZSA9IHdpZGdldEhlbHBlci5nZXREYXRlRm9yU3RyaW5nRGF0ZSh0aWNMYWJlbERvbVswXS5pbm5lckhUTUwpLmdldFRpbWUoKTtcclxuICAgICAgICB0aGlzLmF4aXNTdG9wVGltZSA9IHdpZGdldEhlbHBlci5nZXREYXRlRm9yU3RyaW5nRGF0ZSh0aWNMYWJlbERvbVtsZW5ndGgtMV0uaW5uZXJIVE1MKS5nZXRUaW1lKCk7XHJcbiAgICAgICAgdGhpcy5heGlzU3RhcnRMZWZ0ID0gdGljTWFpbkRvbVswXS5vZmZzZXRMZWZ0O1xyXG4gICAgICAgIHRoaXMuYXhpc1N0b3BMZWZ0ID0gdGljTWFpbkRvbVtsZW5ndGgtMV0ub2Zmc2V0TGVmdDtcclxuICAgIH1cclxuICAgIC8v5Yid5aeL5YyW5Y2V5Liq5pe26Ze05YC85p2h5bimXHJcbiAgICBpbml0VGFyZ2V0U2FtcGxlU3RyaXBlIChlbGVtZW50KSB7XHJcbiAgICAgICAgaWYoISh0aGlzLmF4aXNTdGFydFRpbWUgJiYgdGhpcy5heGlzU3RvcFRpbWUpKSByZXR1cm47XHJcbiAgICAgICAgY29uc3Qgc3RhcnQgPSBuZXcgRGF0ZShwYXJzZUludChlbGVtZW50LmdldEF0dHJpYnV0ZSgnc3RhcnQnKSkpO1xyXG4gICAgICAgIGNvbnN0IHN0b3AgPSBuZXcgRGF0ZShwYXJzZUludChlbGVtZW50LmdldEF0dHJpYnV0ZSgnc3RvcCcpKSk7XHJcbiAgICAgICAgaWYoc3RhcnQgPD0gdGhpcy5heGlzU3RhcnRUaW1lICYmIHN0b3AgPj0gdGhpcy5heGlzU3RvcFRpbWUpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5sZWZ0ID0gMDtcclxuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5yaWdodCA9IDA7XHJcbiAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVXaWR0aCA9ICh0aGlzLmF4aXNTdG9wTGVmdCAtIHRoaXMuYXhpc1N0YXJ0TGVmdCkvKHRoaXMuYXhpc1N0b3BUaW1lIC10aGlzLmF4aXNTdGFydFRpbWUpO1xyXG4gICAgICAgICAgICBjb25zdCBzdGFydExlZnQgPSB0aGlzLmF4aXNTdGFydExlZnQgKyB0aGlzLnRpbWVXaWR0aCAqIChzdGFydCAtIHRoaXMuYXhpc1N0YXJ0VGltZSk7XHJcbiAgICAgICAgICAgIGxldCBzdG9wTGVmdCA9ICB0aGlzLmF4aXNTdGFydExlZnQgKyB0aGlzLnRpbWVXaWR0aCAqIChzdG9wIC0gdGhpcy5heGlzU3RhcnRUaW1lKTtcclxuICAgICAgICAgICAgaWYoc3RvcExlZnQgLSBzdGFydExlZnQgPCAxKSBzdG9wTGVmdCA9IHN0YXJ0TGVmdCArIDE7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUubGVmdCA9IHN0YXJ0TGVmdCArIDEgKyAncHgnO1xyXG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLnJpZ2h0ID0gdGhpcy53aWR0aCAtIHN0b3BMZWZ0IC0gMSArICdweCc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy/liJ3lp4vljJbml7bpl7TlgLzmnaHluKZcclxuICAgIGluaXRTYW1wbGVUYXJnZXRTdHJpcGUgKCkge1xyXG4gICAgICAgIGlmKCF0aGlzLnN0cmlwZS5sZW5ndGgpIHJldHVybjtcclxuICAgICAgICB0aGlzLnN0cmlwZS5mb3JFYWNoKHRoaXMuaW5pdFRhcmdldFNhbXBsZVN0cmlwZSx0aGlzKTtcclxuICAgIH1cclxuICAgIC8v5pe26ZKf55uR5ZCsXHJcbiAgICBpbml0RXZlbnRMaXN0ZW5lciAoKSB7XHJcbiAgICAgICAgaWYoIXRoaXMudGltZWxpbmUgJiYgdGhpcy5ldmVudExpc3RlbmVyKSByZXR1cm47XHJcbiAgICAgICAgdGhpcy5jbG9ja0N0cmwgJiYgdGhpcy5jbG9ja0N0cmwuYWRkQ2xhc3NOYW1lKCdnaXMtb2Zmc2V0QnlHYW50dENoYXJ0Jyk7XHJcbiAgICAgICAgdGhpcy5naXMuYWRkQ2xvY2tFdmVudChmdW5jdGlvbiB0aWNrICgpIHtcclxuICAgICAgICAgICAgdGhpcy5ldmVudExpc3RlbmVyID0gdGljaztcclxuICAgICAgICAgICAgdGhpcy5pbml0RWxlbWVudEFuZFRpbWVsaW5lVGljKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdFNhbXBsZVRhcmdldFN0cmlwZSgpO1xyXG4gICAgICAgIH0sIHRoaXMpO1xyXG4gICAgfVxyXG4gICAgLy/np7vpmaTml7bpkp/nm5HlkKxcclxuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIgKCkge1xyXG4gICAgICAgIHRoaXMuY2xvY2tDdHJsICYmIHRoaXMuY2xvY2tDdHJsLnJlbW92ZUNsYXNzTmFtZSgnZ2lzLW9mZnNldEJ5R2FudHRDaGFydCcpO1xyXG4gICAgICAgIHRoaXMuZ2lzLnJlbW92ZUNsb2NrRXZlbnQodGhpcy5ldmVudExpc3RlbmVyLCB0aGlzKTtcclxuICAgICAgICB0aGlzLmV2ZW50TGlzdGVuZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMucG9zaXRpb25JbmZvLnN0eWxlLnJpZ2h0ID0gMzAgKyAncHgnO1xyXG4gICAgICAgIHRoaXMucG9zaXRpb25JbmZvLnN0eWxlLmJvdHRvbSA9IDQwICsgJ3B4JztcclxuICAgIH1cclxufSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTs7Ozs7O0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBeEdBO0FBQ0E7QUFDQTtBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/js/plugin/ganttChart.js\n");

/***/ }),

/***/ "./src/js/plugin/ganttChartManage.js":
/*!*******************************************!*\
  !*** ./src/js/plugin/ganttChartManage.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ \"./node_modules/babel-runtime/core-js/object/get-prototype-of.js\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ \"./node_modules/babel-runtime/helpers/classCallCheck.js\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(/*! babel-runtime/helpers/createClass */ \"./node_modules/babel-runtime/helpers/createClass.js\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ \"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(/*! babel-runtime/helpers/inherits */ \"./node_modules/babel-runtime/helpers/inherits.js\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _widgetHelper = __webpack_require__(/*! ../widgetHelper */ \"./src/js/widgetHelper.js\");\n\nvar _widgetHelper2 = _interopRequireDefault(_widgetHelper);\n\nvar _ganttChart = __webpack_require__(/*! ./ganttChart */ \"./src/js/plugin/ganttChart.js\");\n\nvar _ganttChart2 = _interopRequireDefault(_ganttChart);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*甘特图操作管理模块*/\nvar _class = function (_GanttChart) {\n    (0, _inherits3.default)(_class, _GanttChart);\n\n    function _class(gis) {\n        (0, _classCallCheck3.default)(this, _class);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (_class.__proto__ || (0, _getPrototypeOf2.default)(_class)).call(this));\n\n        _this.gis = gis;\n        return _this;\n    }\n    //初始化\n\n\n    (0, _createClass3.default)(_class, [{\n        key: 'init',\n        value: function init() {\n            var plugin = this.gis.pluginManage.addPlugin({ id: 'GanttChart', title: '甘特图', className: 'gis-ganttChart', type: 'chart', proto: this });\n            this.parentDiv = plugin.dom;\n            plugin.dom.oncontextmenu = function (e) {\n                e = e || window.event;\n                if (e.button === 2) {\n                    e.preventDefault();\n                }\n            };\n            this.initFrame(plugin.dom);\n            // this.timePointer = this.createPointer();\n            this.initial();\n            return this;\n        }\n        //初始化dom层\n\n    }, {\n        key: 'initFrame',\n        value: function initFrame(parentDiv) {\n            var div = _widgetHelper2.default.createDiv({ className: 'gis-ganttChartContainer' });\n            div.appendChild(parentDiv);\n            this.gis.getManager().container.appendChild(div);\n            return div;\n        }\n        //创建指针\n\n    }, {\n        key: 'createPointer',\n        value: function createPointer() {\n            var timePointer = document.createElement('time');\n            timePointer.className = 'gis-timePointer';\n            this.parentDiv.appendChild(timePointer);\n            return timePointer;\n        }\n        //重置条带任务\n\n    }, {\n        key: 'resetTargetTask',\n        value: function resetTargetTask() {\n            this.isRunning(false);\n            this.parentDiv.innerHTML = '';\n            this.timePointer = null;\n            this.stripe = [];\n        }\n        /**\r\n         * 初始化目标栏\r\n         * @param target{Object}\r\n         * @return {Element}\r\n         */\n\n    }, {\n        key: 'initTargetTask',\n        value: function initTargetTask(target) {\n            !this.eventListener && this.isRunning(true);\n            if (!this.timePointer) this.timePointer = this.createPointer();\n            var figure = document.createElement('figure');\n            figure.id = target.id;\n            figure.className = 'gis-targetGanttChart';\n            var article = document.createElement('article');\n            article.className = 'gis-targetName';\n            article.innerText = target.name + '：';\n            figure.appendChild(article);\n            var div = document.createElement('div');\n            div.className = 'gis-taskSeries';\n            div.id = target.code;\n            figure.appendChild(div);\n            this.parentDiv.appendChild(figure);\n            return figure;\n        }\n        /**\r\n         初始化任务条带\r\n         * @param code{String|Number} 目标代号\r\n         * @param title{String} 任务描述\r\n         * @param start{String} 任务开始时间\r\n         * @param stop{String} 任务结束时间\r\n         * @param color{String} 颜色值\r\n         */\n\n    }, {\n        key: 'loadTargetStripe',\n        value: function loadTargetStripe(code, title, start, stop, color) {\n            var parent = document.getElementById(code);\n            if (!parent) return;\n            color = color === 'pink' && 'red' || color === 'gray' && 'green' || color;\n            var stripe = document.createElement('div');\n            stripe.className = \"gis-bar \" + color;\n            stripe.title = title;\n            stripe.setAttribute('start', Cesium.JulianDate.toDate(start).getTime());\n            stripe.setAttribute('stop', Cesium.JulianDate.toDate(stop).getTime());\n            parent.appendChild(stripe);\n            this.stripe.push(stripe);\n        }\n        /**\r\n         *  通过卫星id移除目标条带任务\r\n         * @param id\r\n         */\n\n    }, {\n        key: 'removeTargetTaskById',\n        value: function removeTargetTaskById(id) {\n            var figure = document.getElementById(id);\n            if (!figure) return;\n            this.stripe.forEach(function (element, index) {\n                if (element.parentNode.parentNode.id === id) this.stripe.splice(index, 1);\n            }, this);\n            this.parentDiv.removeChild(figure);\n            if (this.parentDiv.childNodes.length === 1) this.isRunning(false);\n        }\n        //是否显示甘特图\n\n    }, {\n        key: 'isRunning',\n        value: function isRunning(flag) {\n            if (Boolean(flag)) {\n                this.parentDiv.classList.add('active');\n                this.initEventListener();\n            } else {\n                this.parentDiv.classList.remove('active');\n                this.removeEventListener();\n            }\n        }\n    }]);\n    return _class;\n}(_ganttChart2.default);\n\nexports.default = _class;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvanMvcGx1Z2luL2dhbnR0Q2hhcnRNYW5hZ2UuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2pzL3BsdWdpbi9nYW50dENoYXJ0TWFuYWdlLmpzPzJkN2EiXSwic291cmNlc0NvbnRlbnQiOlsiLyrnlJjnibnlm77mk43kvZznrqHnkIbmqKHlnZcqL1xyXG5pbXBvcnQgd2lkZ2V0SGVscGVyIGZyb20gJy4uL3dpZGdldEhlbHBlcic7XHJcbmltcG9ydCBHYW50dENoYXJ0IGZyb20gJy4vZ2FudHRDaGFydCc7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgR2FudHRDaGFydCB7XHJcbiAgICBjb25zdHJ1Y3RvcihnaXMpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuZ2lzID0gZ2lzO1xyXG4gICAgfVxyXG4gICAgLy/liJ3lp4vljJZcclxuICAgIGluaXQgKCkge1xyXG4gICAgICAgIGNvbnN0IHBsdWdpbiA9IHRoaXMuZ2lzLnBsdWdpbk1hbmFnZS5hZGRQbHVnaW4oe2lkOidHYW50dENoYXJ0JywgdGl0bGU6J+eUmOeJueWbvicsIGNsYXNzTmFtZTonZ2lzLWdhbnR0Q2hhcnQnLCB0eXBlOidjaGFydCcsIHByb3RvOnRoaXN9KTtcclxuICAgICAgICB0aGlzLnBhcmVudERpdiA9IHBsdWdpbi5kb207XHJcbiAgICAgICAgcGx1Z2luLmRvbS5vbmNvbnRleHRtZW51ID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZSA9IGUgfHwgd2luZG93LmV2ZW50O1xyXG4gICAgICAgICAgICBpZihlLmJ1dHRvbiA9PT0gMil7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuaW5pdEZyYW1lKHBsdWdpbi5kb20pO1xyXG4gICAgICAgIC8vIHRoaXMudGltZVBvaW50ZXIgPSB0aGlzLmNyZWF0ZVBvaW50ZXIoKTtcclxuICAgICAgICB0aGlzLmluaXRpYWwoKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIC8v5Yid5aeL5YyWZG9t5bGCXHJcbiAgICBpbml0RnJhbWUgKHBhcmVudERpdikge1xyXG4gICAgICAgIGNvbnN0IGRpdiA9ICB3aWRnZXRIZWxwZXIuY3JlYXRlRGl2KHtjbGFzc05hbWU6J2dpcy1nYW50dENoYXJ0Q29udGFpbmVyJ30pO1xyXG4gICAgICAgIGRpdi5hcHBlbmRDaGlsZChwYXJlbnREaXYpO1xyXG4gICAgICAgIHRoaXMuZ2lzLmdldE1hbmFnZXIoKS5jb250YWluZXIuYXBwZW5kQ2hpbGQoZGl2KTtcclxuICAgICAgICByZXR1cm4gZGl2O1xyXG4gICAgfVxyXG4gICAgLy/liJvlu7rmjIfpkohcclxuICAgIGNyZWF0ZVBvaW50ZXIgKCkge1xyXG4gICAgICAgIGNvbnN0IHRpbWVQb2ludGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGltZScpO1xyXG4gICAgICAgIHRpbWVQb2ludGVyLmNsYXNzTmFtZSA9ICdnaXMtdGltZVBvaW50ZXInO1xyXG4gICAgICAgIHRoaXMucGFyZW50RGl2LmFwcGVuZENoaWxkKHRpbWVQb2ludGVyKTtcclxuICAgICAgICByZXR1cm4gdGltZVBvaW50ZXI7XHJcbiAgICB9XHJcbiAgICAvL+mHjee9ruadoeW4puS7u+WKoVxyXG4gICAgcmVzZXRUYXJnZXRUYXNrICgpIHtcclxuICAgICAgICB0aGlzLmlzUnVubmluZyhmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5wYXJlbnREaXYuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgdGhpcy50aW1lUG9pbnRlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5zdHJpcGU9W107XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWIneWni+WMluebruagh+agj1xyXG4gICAgICogQHBhcmFtIHRhcmdldHtPYmplY3R9XHJcbiAgICAgKiBAcmV0dXJuIHtFbGVtZW50fVxyXG4gICAgICovXHJcbiAgICBpbml0VGFyZ2V0VGFzayAodGFyZ2V0KSB7XHJcbiAgICAgICAgIXRoaXMuZXZlbnRMaXN0ZW5lciAmJiB0aGlzLmlzUnVubmluZyh0cnVlKTtcclxuICAgICAgICBpZighdGhpcy50aW1lUG9pbnRlcikgdGhpcy50aW1lUG9pbnRlciA9IHRoaXMuY3JlYXRlUG9pbnRlcigpO1xyXG4gICAgICAgIGNvbnN0IGZpZ3VyZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ZpZ3VyZScpO1xyXG4gICAgICAgIGZpZ3VyZS5pZCA9IHRhcmdldC5pZDtcclxuICAgICAgICBmaWd1cmUuY2xhc3NOYW1lID0gJ2dpcy10YXJnZXRHYW50dENoYXJ0JztcclxuICAgICAgICBjb25zdCBhcnRpY2xlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXJ0aWNsZScpO1xyXG4gICAgICAgIGFydGljbGUuY2xhc3NOYW1lID0gJ2dpcy10YXJnZXROYW1lJztcclxuICAgICAgICBhcnRpY2xlLmlubmVyVGV4dCA9IHRhcmdldC5uYW1lICsgJ++8mic7XHJcbiAgICAgICAgZmlndXJlLmFwcGVuZENoaWxkKGFydGljbGUpO1xyXG4gICAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIGRpdi5jbGFzc05hbWUgPSAnZ2lzLXRhc2tTZXJpZXMnO1xyXG4gICAgICAgIGRpdi5pZCA9IHRhcmdldC5jb2RlO1xyXG4gICAgICAgIGZpZ3VyZS5hcHBlbmRDaGlsZChkaXYpO1xyXG4gICAgICAgIHRoaXMucGFyZW50RGl2LmFwcGVuZENoaWxkKGZpZ3VyZSk7XHJcbiAgICAgICAgcmV0dXJuIGZpZ3VyZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgIOWIneWni+WMluS7u+WKoeadoeW4plxyXG4gICAgICogQHBhcmFtIGNvZGV7U3RyaW5nfE51bWJlcn0g55uu5qCH5Luj5Y+3XHJcbiAgICAgKiBAcGFyYW0gdGl0bGV7U3RyaW5nfSDku7vliqHmj4/ov7BcclxuICAgICAqIEBwYXJhbSBzdGFydHtTdHJpbmd9IOS7u+WKoeW8gOWni+aXtumXtFxyXG4gICAgICogQHBhcmFtIHN0b3B7U3RyaW5nfSDku7vliqHnu5PmnZ/ml7bpl7RcclxuICAgICAqIEBwYXJhbSBjb2xvcntTdHJpbmd9IOminOiJsuWAvFxyXG4gICAgICovXHJcbiAgICBsb2FkVGFyZ2V0U3RyaXBlIChjb2RlLHRpdGxlLHN0YXJ0LHN0b3AsY29sb3IpIHtcclxuICAgICAgICBjb25zdCBwYXJlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb2RlKTtcclxuICAgICAgICBpZighcGFyZW50KSByZXR1cm47XHJcbiAgICAgICAgY29sb3IgPSBjb2xvciA9PT0gJ3BpbmsnICYmICdyZWQnIHx8IGNvbG9yID09PSAnZ3JheScgJiYgJ2dyZWVuJyB8fCBjb2xvcjtcclxuICAgICAgICBjb25zdCBzdHJpcGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBzdHJpcGUuY2xhc3NOYW1lID0gXCJnaXMtYmFyIFwiKyBjb2xvcjtcclxuICAgICAgICBzdHJpcGUudGl0bGUgPSB0aXRsZTtcclxuICAgICAgICBzdHJpcGUuc2V0QXR0cmlidXRlKCdzdGFydCcsQ2VzaXVtLkp1bGlhbkRhdGUudG9EYXRlKHN0YXJ0KS5nZXRUaW1lKCkpO1xyXG4gICAgICAgIHN0cmlwZS5zZXRBdHRyaWJ1dGUoJ3N0b3AnLENlc2l1bS5KdWxpYW5EYXRlLnRvRGF0ZShzdG9wKS5nZXRUaW1lKCkpO1xyXG4gICAgICAgIHBhcmVudC5hcHBlbmRDaGlsZChzdHJpcGUpO1xyXG4gICAgICAgIHRoaXMuc3RyaXBlLnB1c2goc3RyaXBlKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogIOmAmui/h+WNq+aYn2lk56e76Zmk55uu5qCH5p2h5bim5Lu75YqhXHJcbiAgICAgKiBAcGFyYW0gaWRcclxuICAgICAqL1xyXG4gICAgcmVtb3ZlVGFyZ2V0VGFza0J5SWQgKGlkKSB7XHJcbiAgICAgICAgY29uc3QgZmlndXJlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG4gICAgICAgIGlmKCFmaWd1cmUpIHJldHVybjtcclxuICAgICAgICB0aGlzLnN0cmlwZS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50LGluZGV4KSB7XHJcbiAgICAgICAgICAgIGlmKGVsZW1lbnQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmlkID09PSBpZCkgdGhpcy5zdHJpcGUuc3BsaWNlKGluZGV4LDEpO1xyXG4gICAgICAgIH0sdGhpcyk7XHJcbiAgICAgICAgdGhpcy5wYXJlbnREaXYucmVtb3ZlQ2hpbGQoZmlndXJlKTtcclxuICAgICAgICBpZih0aGlzLnBhcmVudERpdi5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMSkgdGhpcy5pc1J1bm5pbmcoZmFsc2UpO1xyXG4gICAgfVxyXG4gICAgLy/mmK/lkKbmmL7npLrnlJjnibnlm75cclxuICAgIGlzUnVubmluZyAoZmxhZyl7XHJcbiAgICAgICAgaWYoQm9vbGVhbihmbGFnKSl7XHJcbiAgICAgICAgICAgIHRoaXMucGFyZW50RGl2LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICB0aGlzLmluaXRFdmVudExpc3RlbmVyKCk7XHJcbiAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnBhcmVudERpdi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7Ozs7O0FBSEE7Ozs7QUFJQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFGQTtBQUdBO0FBQ0E7QUFDQTtBQUNBOzs7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUF6R0E7QUFDQTtBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/js/plugin/ganttChartManage.js\n");

/***/ })

}]);